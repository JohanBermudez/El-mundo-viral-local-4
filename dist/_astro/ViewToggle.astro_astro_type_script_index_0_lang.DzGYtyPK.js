let l=[],p=(e,d)=>{let i=[],s={get(){return s.lc||s.listen(()=>{})(),s.value},l:0,lc:0,listen(n,r){return s.lc=i.push(n,r||s.l)/2,()=>{let t=i.indexOf(n);~t&&(i.splice(t,2),--s.lc||s.off())}},notify(n){let r=!l.length;for(let t=0;t<i.length;t+=2)l.push(i[t],i[t+1],s.value,n);if(r){for(let t=0;t<l.length;t+=4){let u;for(let v=t+1;!u&&(v+=4)<l.length;)l[v]<l[t+1]&&(u=l.push(l[t],l[t+1],l[t+2],l[t+3]));u||l[t](l[t+2],l[t+3])}l.length=0}},off(){},set(n){s.value!==n&&(s.value=n,s.notify())},subscribe(n,r){let t=s.listen(n,r);return n(s.value),t},value:e};return s};let T=(e,d,i,s)=>(e.events=e.events||{},e.events[i+10]||(e.events[i+10]=s(n=>{e.events[i].reduceRight((r,t)=>(t(r),r),{shared:{},...n})})),e.events[i]=e.events[i]||[],e.events[i].push(d),()=>{let n=e.events[i],r=n.indexOf(d);n.splice(r,1),n.length||(delete e.events[i],e.events[i+10](),delete e.events[i+10])}),h=1e3,L=(e,d)=>T(e,s=>{let n=d(s);n&&e.events[6].push(n)},5,s=>{let n=e.listen;e.listen=(...t)=>(!e.lc&&!e.active&&(e.active=!0,s()),n(...t));let r=e.off;return e.events[6]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let t of e.events[6])t();e.events[6]=[]}},h)},()=>{e.listen=n,e.off=r}}),w=e=>e,g={},c={addEventListener(){},removeEventListener(){}};function y(){try{return typeof localStorage<"u"}catch{return!1}}y()&&(g=localStorage);let m={addEventListener(e,d,i){window.addEventListener("storage",d),window.addEventListener("pageshow",i)},removeEventListener(e,d,i){window.removeEventListener("storage",d),window.removeEventListener("pageshow",i)}};typeof window<"u"&&(c=m);function N(e,d=void 0,i={}){let s=i.encode||w,n=i.decode||w,r=p(d),t=r.set;r.set=f=>{typeof f>"u"?delete g[e]:g[e]=s(f),t(f)};function u(f){f.key===e?f.newValue===null?t(void 0):t(n(f.newValue)):g[e]||t(void 0)}function v(){r.set(g[e]?n(g[e]):d)}return L(r,()=>{if(v(),i.listen!==!1)return c.addEventListener(e,u,v),()=>{c.removeEventListener(e,u,v)}}),r}const E=N("viewMode","grid"),a=document.getElementById("gridViewButton"),o=document.getElementById("listViewButton");E.subscribe(e=>{a&&o&&(e==="grid"?(a.classList.add("bg-primary-100","text-primary-800"),a.classList.remove("text-gray-500","hover:bg-gray-100"),o.classList.remove("bg-primary-100","text-primary-800"),o.classList.add("text-gray-500","hover:bg-gray-100")):(o.classList.add("bg-primary-100","text-primary-800"),o.classList.remove("text-gray-500","hover:bg-gray-100"),a.classList.remove("bg-primary-100","text-primary-800"),a.classList.add("text-gray-500","hover:bg-gray-100")))});a&&a.addEventListener("click",()=>{E.set("grid"),window.dispatchEvent(new CustomEvent("viewModeChanged",{detail:"grid"}))});o&&o.addEventListener("click",()=>{E.set("list"),window.dispatchEvent(new CustomEvent("viewModeChanged",{detail:"list"}))});export{E as v};
